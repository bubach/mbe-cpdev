<?php eval("?>".base64_decode("PD9waHANCnJlcXVpcmVfb25jZSBNYWdlOjpnZXRNb2R1bGVEaXIoJ2NvbnRyb2xsZXJzJywgJ01hZ2VfQ2F0YWxvZycpLkRTLiJQcm9kdWN0Q29udHJvbGxlci5waHAiOw0KDQpjbGFzcyBTY29tbWVyY2VfQ2F0YWxvZ1VybF9Qcm9kdWN0Q29udHJvbGxlciBleHRlbmRzIE1hZ2VfQ2F0YWxvZ19Qcm9kdWN0Q29udHJvbGxlcg0Kew0KCS8qKg0KICAgICAqIFZpZXcgcHJvZHVjdCBhY3Rpb24NCiAgICAgKi8NCiAgICBwdWJsaWMgZnVuY3Rpb24gdmlld0FjdGlvbigpDQogICAgew0KICAgICAgICBpZiAoTWFnZTo6aGVscGVyKCJzY29tbWVyY2VfY2F0YWxvZ3VybCIpLT5nZXRFbmFibGUoKSl7DQoJCQlpZiAodmVyc2lvbl9jb21wYXJlKE1hZ2U6OmdldFZlcnNpb24oKSwgJzEuNC4yLjAnLCAnPCcpPT09dHJ1ZSkgewkJCQ0KCQkJCWlmICgkcHJvZHVjdCA9ICR0aGlzLT5faW5pdFByb2R1Y3QoKSkgew0KCQkJCQkkdGhpcy0+ZmluZE1hdGNoaW5nUmVkaXJlY3Rpb24oJHByb2R1Y3QpOw0KCQkJCQkNCgkJCQkJTWFnZTo6ZGlzcGF0Y2hFdmVudCgnY2F0YWxvZ19jb250cm9sbGVyX3Byb2R1Y3RfdmlldycsIGFycmF5KCdwcm9kdWN0Jz0+JHByb2R1Y3QpKTsNCg0KCQkJCQlpZiAoJHRoaXMtPmdldFJlcXVlc3QoKS0+Z2V0UGFyYW0oJ29wdGlvbnMnKSkgew0KCQkJCQkJJG5vdGljZSA9ICRwcm9kdWN0LT5nZXRUeXBlSW5zdGFuY2UodHJ1ZSktPmdldFNwZWNpZnlPcHRpb25NZXNzYWdlKCk7DQoJCQkJCQlNYWdlOjpnZXRTaW5nbGV0b24oJ2NhdGFsb2cvc2Vzc2lvbicpLT5hZGROb3RpY2UoJG5vdGljZSk7DQoJCQkJCX0NCg0KCQkJCQlNYWdlOjpnZXRTaW5nbGV0b24oJ2NhdGFsb2cvc2Vzc2lvbicpLT5zZXRMYXN0Vmlld2VkUHJvZHVjdElkKCRwcm9kdWN0LT5nZXRJZCgpKTsNCg0KCQkJCQkkdGhpcy0+X2luaXRQcm9kdWN0TGF5b3V0KCRwcm9kdWN0KTsNCgkJCQkJJHRoaXMtPl9pbml0TGF5b3V0TWVzc2FnZXMoJ2NhdGFsb2cvc2Vzc2lvbicpOw0KCQkJCQkkdGhpcy0+X2luaXRMYXlvdXRNZXNzYWdlcygndGFnL3Nlc3Npb24nKTsNCgkJCQkJJHRoaXMtPl9pbml0TGF5b3V0TWVzc2FnZXMoJ2NoZWNrb3V0L3Nlc3Npb24nKTsNCgkJCQkJJHRoaXMtPnJlbmRlckxheW91dCgpOw0KCQkJCX0NCgkJCQllbHNlIHsNCgkJCQkJaWYgKGlzc2V0KCRfR0VUWydzdG9yZSddKSAgJiYgISR0aGlzLT5nZXRSZXNwb25zZSgpLT5pc1JlZGlyZWN0KCkpIHsNCgkJCQkJCSR0aGlzLT5fcmVkaXJlY3QoJycpOw0KCQkJCQl9IGVsc2VpZiAoISR0aGlzLT5nZXRSZXNwb25zZSgpLT5pc1JlZGlyZWN0KCkpIHsNCgkJCQkJCSR0aGlzLT5fZm9yd2FyZCgnbm9Sb3V0ZScpOw0KCQkJCQl9DQoJCQkJfQ0KCQkJfQ0KCQkJZWxzZXsNCgkJCQkNCgkJCQkvLyBHZXQgaW5pdGlhbCBkYXRhIGZyb20gcmVxdWVzdA0KCQkJCSRjYXRlZ29yeUlkID0gKGludCkgJHRoaXMtPmdldFJlcXVlc3QoKS0+Z2V0UGFyYW0oJ2NhdGVnb3J5JywgZmFsc2UpOw0KCQkJCSRwcm9kdWN0SWQgID0gKGludCkgJHRoaXMtPmdldFJlcXVlc3QoKS0+Z2V0UGFyYW0oJ2lkJyk7DQoJCQkJJHNwZWNpZnlPcHRpb25zID0gJHRoaXMtPmdldFJlcXVlc3QoKS0+Z2V0UGFyYW0oJ29wdGlvbnMnKTsNCg0KCQkJCSRwcm9kdWN0ID0gTWFnZTo6Z2V0TW9kZWwoJ2NhdGFsb2cvcHJvZHVjdCcpLT5sb2FkKCRwcm9kdWN0SWQpOw0KCQkJCQ0KCQkJCSR0aGlzLT5maW5kTWF0Y2hpbmdSZWRpcmVjdGlvbigkcHJvZHVjdCk7DQoJCQkJDQoJCQkJLy8gUHJlcGFyZSBoZWxwZXIgYW5kIHBhcmFtcw0KCQkJCSR2aWV3SGVscGVyID0gTWFnZTo6aGVscGVyKCdjYXRhbG9nL3Byb2R1Y3RfdmlldycpOw0KDQoJCQkJJHBhcmFtcyA9IG5ldyBWYXJpZW5fT2JqZWN0KCk7DQoJCQkJJHBhcmFtcy0+c2V0Q2F0ZWdvcnlJZCgkY2F0ZWdvcnlJZCk7DQoJCQkJJHBhcmFtcy0+c2V0U3BlY2lmeU9wdGlvbnMoJHNwZWNpZnlPcHRpb25zKTsNCg0KCQkJCS8vIFJlbmRlciBwYWdlDQoJCQkJdHJ5IHsNCgkJCQkJJHZpZXdIZWxwZXItPnByZXBhcmVBbmRSZW5kZXIoJHByb2R1Y3RJZCwgJHRoaXMsICRwYXJhbXMpOw0KCQkJCX0gY2F0Y2ggKEV4Y2VwdGlvbiAkZSkgew0KCQkJCQlpZiAoJGUtPmdldENvZGUoKSA9PSAkdmlld0hlbHBlci0+RVJSX05PX1BST0RVQ1RfTE9BREVEKSB7DQoJCQkJCQlpZiAoaXNzZXQoJF9HRVRbJ3N0b3JlJ10pICAmJiAhJHRoaXMtPmdldFJlc3BvbnNlKCktPmlzUmVkaXJlY3QoKSkgew0KCQkJCQkJCSR0aGlzLT5fcmVkaXJlY3QoJycpOw0KCQkJCQkJfSBlbHNlaWYgKCEkdGhpcy0+Z2V0UmVzcG9uc2UoKS0+aXNSZWRpcmVjdCgpKSB7DQoJCQkJCQkJJHRoaXMtPl9mb3J3YXJkKCdub1JvdXRlJyk7DQoJCQkJCQl9DQoJCQkJCX0gZWxzZSB7DQoJCQkJCQlNYWdlOjpsb2dFeGNlcHRpb24oJGUpOw0KCQkJCQkJJHRoaXMtPl9mb3J3YXJkKCdub1JvdXRlJyk7DQoJCQkJCX0NCgkJCQl9DQoNCgkJCX0NCgkJfQ0KCQllbHNlew0KCQkJcGFyZW50Ojp2aWV3QWN0aW9uKCk7DQoJCX0NCiAgICB9DQoJDQoJcHJvdGVjdGVkIGZ1bmN0aW9uIGZpbmRNYXRjaGluZ1JlZGlyZWN0aW9uKCRwcm9kdWN0KQ0KCXsNCgkJJHN0b3JlSWQgPSAkcHJvZHVjdC0+Z2V0U3RvcmVJZCgpOw0KCQkkY2F0ZWdvcnkgPSAkdGhpcy0+Z2V0UmVxdWVzdCgpLT5nZXRQYXJhbSgnY2F0ZWdvcnknKTsNCgkJJHBhdGhJbmZvID0gJHRoaXMtPmdldFJlcXVlc3QoKS0+Z2V0UGF0aEluZm8oKTsNCgkJJHJlcXVlc3RQYXRoID0gc3Vic3RyKCRwYXRoSW5mbywxLHN0cmxlbigkcGF0aEluZm8pLTEpOw0KCQlpZiAoIU1hZ2U6OmhlbHBlcigic2NvbW1lcmNlX2NhdGFsb2d1cmwiKS0+Z2V0UmVtb3ZlQ2F0UGF0aCgpKXsNCgkJCSRwcmltYXJ5X2NhdGVnb3J5ID0gTWFnZTo6Z2V0UmVzb3VyY2VNb2RlbCgnY2F0YWxvZy9wcm9kdWN0JyktPmdldEF0dHJpYnV0ZVJhd1ZhbHVlKCRwcm9kdWN0LT5nZXRJZCgpLCAncHJvZHVjdF9wcmltYXJ5X2NhdGVnb3J5JywgJHN0b3JlSWQpOw0KDQoJCQlpZiAoc3RybGVuKCRwcmltYXJ5X2NhdGVnb3J5KT4wKXsNCgkJCQlpZiAoISRjYXRlZ29yeSl7DQoJCQkJCSRwcmltYXJ5X2NhdGVnb3J5ID0gKCRwcmltYXJ5X2NhdGVnb3J5KSA/ICRwcmltYXJ5X2NhdGVnb3J5IDogZW5kKCRwcm9kdWN0LT5nZXRDYXRlZ29yeUlkcygpKTsNCgkJCQkJJHRoaXMtPnJlZGlyZWN0UHJvZHVjdFVybCgkcHJvZHVjdCwgJHN0b3JlSWQsICRwcmltYXJ5X2NhdGVnb3J5KTsNCgkJCQl9DQoJCQkJZWxzZWlmICgoaW50KSRjYXRlZ29yeSAhPT0gKGludCkkcHJpbWFyeV9jYXRlZ29yeSl7DQoJCQkJCSR0aGlzLT5yZWRpcmVjdFByb2R1Y3RVcmwoJHByb2R1Y3QsICRzdG9yZUlkLCAkcHJpbWFyeV9jYXRlZ29yeSk7DQoJCQkJfQ0KCQkJCWVsc2VpZiAoKHN0cnBvcygkcmVxdWVzdFBhdGgsJ3ZpZXcnKSE9PWZhbHNlKSAmJiAoc3RycG9zKCRyZXF1ZXN0UGF0aCwnY2F0ZWdvcnknKSE9PWZhbHNlKSl7DQoJCQkJCSR1cmxSZXdyaXRlID0gTWFnZTo6Z2V0TW9kZWwoJ2NvcmUvdXJsX3Jld3JpdGUnKS0+bG9hZCgkcmVxdWVzdFBhdGgsJ3RhcmdldF9wYXRoJyk7DQoJCQkJCWlmICgkdXJsUmV3cml0ZS0+Z2V0VXJsUmV3cml0ZUlkKCk+MCl7DQoJCQkJCQkkdGhpcy0+cmVkaXJlY3RQcm9kdWN0VXJsKCRwcm9kdWN0LCR1cmxSZXdyaXRlLT5nZXRTdG9yZUlkKCksICR1cmxSZXdyaXRlLT5nZXRDYXRlZ29yeUlkKCkpOw0KCQkJCQl9DQoJCQkJfQkJCQkNCgkJCX0NCgkJfQ0KCQllbHNlaWYgKE1hZ2U6OmhlbHBlcigic2NvbW1lcmNlX2NhdGFsb2d1cmwiKS0+Z2V0UmVtb3ZlQ2F0UGF0aCgpKXsNCgkJCWlmICgoc3RycG9zKCRyZXF1ZXN0UGF0aCwndmlldycpIT09ZmFsc2UpICYmIChzdHJwb3MoJHJlcXVlc3RQYXRoLCdjYXRlZ29yeScpIT09ZmFsc2UpKXsNCgkJCQkkdGhpcy0+cmVkaXJlY3RQcm9kdWN0VXJsKCRwcm9kdWN0LCRzdG9yZUlkLCAnJyk7DQoJCQl9DQoJCQllbHNlaWYgKChzdHJwb3MoJHJlcXVlc3RQYXRoLCd2aWV3JykhPT1mYWxzZSkgJiYgKHN0cnBvcygkcmVxdWVzdFBhdGgsJ3Byb2R1Y3QnKSE9PWZhbHNlKSl7DQoJCQkJJHVybFJld3JpdGUgPSBNYWdlOjpnZXRNb2RlbCgnY29yZS91cmxfcmV3cml0ZScpLT5sb2FkKCRyZXF1ZXN0UGF0aCwndGFyZ2V0X3BhdGgnKTsNCgkJCQkvKmVjaG8gJzxwcmU+JzsNCgkJCQlwcmludF9yKCR1cmxSZXdyaXRlLT5nZXREYXRhKCkpOw0KCQkJCWV4aXQ7Ki8NCgkJCQlpZiAoJHVybFJld3JpdGUtPmdldFVybFJld3JpdGVJZCgpPjApew0KCQkJCQkkdGhpcy0+cmVkaXJlY3RQcm9kdWN0VXJsKCRwcm9kdWN0LCR1cmxSZXdyaXRlLT5nZXRTdG9yZUlkKCksJycpOw0KCQkJCX0NCgkJCX0NCgkJCWVsc2V7DQoJCQkJJHRoaXMtPnJlZGlyZWN0UHJvZHVjdFVybCgkcHJvZHVjdCwkc3RvcmVJZCwgJycpOw0KCQkJfQ0KCQl9DQoJfQ0KCQ0KCXByb3RlY3RlZCBmdW5jdGlvbiByZWRpcmVjdFByb2R1Y3RVcmwoJHByb2R1Y3QsICRzdG9yZUlkLCAkcHJpbWFyeV9jYXRlZ29yeSkNCgl7DQoJCSRiYXNlVXJsID0gTWFnZTo6YXBwKCktPmdldFN0b3JlKCRzdG9yZUlkKS0+Z2V0QmFzZVVybChNYWdlX0NvcmVfTW9kZWxfU3RvcmU6OlVSTF9UWVBFX0xJTkspOw0KDQoJCWlmIChzdHJsZW4oJHByaW1hcnlfY2F0ZWdvcnkpPjApewkNCgkJCSRfY2F0ZWdvcnkgPSBNYWdlOjpnZXRNb2RlbCgnY2F0YWxvZy9jYXRlZ29yeScpDQoJCQkJCS0+c2V0U3RvcmVJZCgkc3RvcmVJZCkNCgkJCQkJLT5sb2FkKCRwcmltYXJ5X2NhdGVnb3J5KTsNCgkJCSR1cmwgPSAkYmFzZVVybCAuc3RyX3JlcGxhY2UoIi5odG1sIiwiIiwkX2NhdGVnb3J5LT5nZXRVcmxQYXRoKCkpLicvJy4kcHJvZHVjdC0+Z2V0VXJsUGF0aCgpOw0KCQkJaGVhZGVyKCJMb2NhdGlvbjoiLiR1cmwsVFJVRSwzMDEpOw0KCQkJZXhpdCgpOw0KCQl9DQoJCWVsc2V7DQoJCQkkdXJsID0gJGJhc2VVcmwgLiRwcm9kdWN0LT5nZXRVcmxQYXRoKCk7DQoJCQloZWFkZXIoIkxvY2F0aW9uOiIuJHVybCxUUlVFLDMwMSk7DQoJCQlleGl0KCk7DQoJCX0NCgl9DQoJDQp9")); ?>